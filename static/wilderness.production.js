!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Wilderness={})}(this,function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function r(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function s(e){return Array.isArray(e)?e:Array.from(e)}function f(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function p(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function l(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function y(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var v=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},d=function(e){return null!==e.match(/^#(?:[0-9a-f]{3}){1,2}$/i)},x=function(e){return e.startsWith("rgba(")},b=function(e){return e.startsWith("rgb(")},g=function(e){return-1!==Object.keys(m).indexOf(e)},F=function(e){var t=e.replace("#","");return 3===t.length&&(t=t.split("").map(function(e){return""+e+e}).join("")),{middleware:"color",r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1}},w=function(e){var t=e.replace(/\s/g,""),r=t.substring(4,t.length-1).split(","),n=v(r,3),a=n[0],i=n[1],o=n[2];return{middleware:"color",r:parseFloat(a),g:parseFloat(i),b:parseFloat(o),a:1}},A=function(e){var t=e.replace(/\s/g,""),r=t.substring(5,t.length-1).split(","),n=v(r,4),a=n[0],i=n[1],o=n[2],u=n[3];return{middleware:"color",r:parseFloat(a),g:parseFloat(i),b:parseFloat(o),a:parseFloat(u)}},S=function(e){return F(m[e])},O=function(e){var t=e.r,r=e.g,n=e.b,a=e.a;return"rgba("+parseInt(k(t,0,255),10)+","+parseInt(k(r,0,255),10)+","+parseInt(k(n,0,255),10)+","+k(a,0,1)+")"},k=function(e,t,r){return Math.max(t,Math.min(r,e))},M={name:"color",input:function(e){if("string"==typeof e){if(d(e))return F(e);if(b(e))return w(e);if(x(e))return A(e);if(g(e))return S(e)}return e},output:function(e){return"object"===(void 0===e?"undefined":h(e))&&"color"===e.middleware?O(e):e}},I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=function e(t){return Array.isArray(t)?t.map(function(t){return e(t)}):null!==t&&"object"===(void 0===t?"undefined":I(t))?Object.keys(t).reduce(function(r,n){return r[n]=e(t[n]),r},{}):t},C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j=["ch","cm","em","ex","in","mm","pc","pt","px","rem","vh","vmax","vmin","vw","%"],D={name:"unit",input:function(e){if("string"==typeof e){var t=e.split(" "),r=t.map(function(e){var t=parseFloat(e),r=e.replace(t,"");return isNaN(t)||""!==r&&-1===j.indexOf(r)?e:[t,r]});if(r.toString()!==t.toString())return{middleware:"unit",values:r}}return e},output:function(e){return"object"===(void 0===e?"undefined":C(e))&&"unit"===e.middleware?e.values.map(function(e){return e.join("")}).join(" "):e}},P={defaults:{keyframe:{duration:250,easing:"easeInOutQuad"},motionPath:{easing:"easeInOutQuad"},timeline:{alternate:!1,initialIterations:0,iterations:1,middleware:[M,D],queue:0,reverse:!1}}},B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=function e(t,r){var n=r(t);if(Array.isArray(n))return n.map(function(t){return e(t,r)});if(null!==n&&"object"===(void 0===n?"undefined":B(n))){var a={};return Object.keys(n).map(function(t){a[t]=e(n[t],r)}),a}return n},q=function(e,t){return t.reduce(function(e,t){return T(e,t.input)},e)},N=function(e,r){return[].concat(t(r)).reverse().reduce(function(e,t){return T(e,t.output)},e)},Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),R=function(e,t){e.keyframes.map(function(e){e.frameShape=q(e.frameShape,t)})},_=function(e){var t=e.alternate,r=e.complete,n=e.initialIterations,a=(e.iterations,e.reverse);if(0===r)return a;var i=z(t,n)?a:!a;return z(t,n+r)?i:!i},H=function(e){var t=e.at,r=e.duration,n=e.iterations,a=e.started;if(void 0===a||t<=a)return 0;var i=t-a;return i>=r*n?n:i/r},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];e.playbackOptions=Y({at:r,timeline:e,playbackOptions:t}),ee(e,r)},Z=function(e,t){var r=e>=1&&e%1==0?1:e%1;return t?1-r:r},z=function(e,t){var r=t%2;return!e||0===t||r<=1&&r%2>0},J=function(e){var t=e.after,r=e.at,n=e.msTimelineShapes,a=e.offset,i=e.timelineFinish;if(void 0!==t||void 0!==r){for(var o=void 0!==t?t:r,u=0;u<n.length;u++){var c=n[u];if(o===c.shape.name)return(void 0!==r?c.timelinePosition.start:c.timelinePosition.finish)+a}for(var s=0;s<n.length;s++)for(var f=n[s],p=0;p<f.shape.keyframes.length;p++){var l=f.shape.keyframes[p];if(o===l.name)return f.timelinePosition.start+f.shape.duration*l.position+a}}return i+a},U=function(e,t){var r=W(e,2),n=r[0],a=r[1],i=a.name,o=void 0===i?t:i,u=a.queue,c=void 0===u?P.defaults.timeline.queue:u;if(void 0===c)return{name:o,offset:0,shape:n};if("object"===(void 0===c?"undefined":L(c))&&!Array.isArray(c)&&null!==c){var s=c.after,f=c.at,p=c.offset,l=void 0===p?0:p;return void 0!==f?{at:f,name:o,offset:l,shape:n}:void 0!==s?{after:s,name:o,offset:l,shape:n}:{name:o,offset:l,shape:n}}return"number"==typeof c?{name:o,offset:c,shape:n}:"string"==typeof c?{after:c,name:o,offset:0,shape:n}:void 0},$=function(e){var t=e.reduce(function(e,t,r){return Array.isArray(t)?e.shapesWithOptions.push(U(t,r)):t.keyframes?e.shapesWithOptions.push({name:r,offset:P.defaults.timeline.queue,shape:t}):e.options=E(t),e},{options:{},shapesWithOptions:[]}),r=t.options,n=t.shapesWithOptions;return{middleware:te(r),playbackOptions:re(r),shapesWithOptions:n}},G=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=$(t),a=n.middleware,i=n.playbackOptions,o=n.shapesWithOptions,u=X(o,a),c=u.duration,s=u.timelineShapes;void 0===i.duration&&(i.duration=c);var f={middleware:a,playbackOptions:i,state:{},timelineShapes:s};return s.map(function(e,t){var r=e.shape;r.timeline=f,r.timelineIndex=t}),ee(f),f.event=ie(f),f},K=function(e){var t=e.duration,r=e.msTimelineShapes,n=e.start;return r.map(function(e){var r=e.shape,a=e.timelinePosition;return{shape:r,timelinePosition:{start:(a.start-n)/t,finish:(a.finish-n)/t}}})},X=function(e,t){var r=0,n=0,a=[];e.map(function(e,i){var o=e.after,u=e.at,c=e.name,s=e.offset,f=e.shape;R(f,t),void 0!==c?f.name=c:void 0===f.name&&(f.name=i);var p=J({after:o,at:u,msTimelineShapes:a,offset:s,timelineFinish:n}),l=p+f.duration;r=Math.min(r,p),n=Math.max(n,l),a.push({shape:f,timelinePosition:{start:p,finish:l}})});var i=Math.abs(r-n);return{duration:i,timelineShapes:K({duration:i,msTimelineShapes:a,start:r})}},Y=function(e){var t=e.at,r=e.pause,n=void 0!==r&&r,a=e.playbackOptions,i=e.timeline,o=i.playbackOptions,u=re(Q({},o,a,{started:void 0!==t?t:Date.now()}));if(void 0!==a.initialIterations)void 0===a.reverse&&(u.reverse=_(Q({},o,{complete:u.initialIterations-o.initialIterations}))),void 0===a.iterations&&o.iterations!==1/0&&(u.iterations=Math.max(0,o.initialIterations+o.iterations-u.initialIterations));else{var c=H(Q({},o,{at:u.started})),s=_(Q({},o,{complete:c}));if(u.initialIterations=o.initialIterations+c,void 0===a.iterations){if(u.iterations=o.iterations-c,void 0!==a.reverse&&u.reverse!==o.reverse&&u.iterations!==1/0){var f=u.initialIterations;u.initialIterations=u.iterations,u.iterations=f}}else void 0!==a.reverse&&a.reverse!==s&&u.iterations!==1/0&&(u.initialIterations=o.iterations-c);void 0===a.reverse?u.reverse=s:u.iterations===1/0&&(u.initialIterations=a.reverse===s?u.initialIterations%1:1-u.initialIterations%1)}return n&&delete u.started,u},ee=function(e,t){var r=e.playbackOptions,n=e.state;n.started=void 0!==r.started,n.iterationsComplete=H(Q({},r,{at:t})),n.totalIterations=r.initialIterations+n.iterationsComplete,n.reverse=_(Q({},r,{complete:n.iterationsComplete})),n.finished=r.iterations-n.iterationsComplete==0,n.position=Z(n.totalIterations,n.reverse)},te=function(e){var t=e.middleware,r=void 0===t?P.defaults.timeline.middleware:t;if(!Array.isArray(r))throw new TypeError("The timeline function middleware option must be of type array");return r.map(function(e){var t=e.name,r=e.input,n=e.output;if("string"!=typeof t)throw new TypeError("A middleware must have a name prop");if("function"!=typeof r)throw new TypeError("The "+t+" middleware must have an input method");if("function"!=typeof n)throw new TypeError("The "+t+" middleware must have an output method")}),r},re=function(e){var t=e.alternate,r=void 0===t?P.defaults.timeline.alternate:t,n=e.duration,a=e.initialIterations,i=void 0===a?P.defaults.timeline.initialIterations:a,o=e.iterations,u=void 0===o?P.defaults.timeline.iterations:o,c=e.reverse,s=void 0===c?P.defaults.timeline.reverse:c,f=e.started,p={};return void 0!==n&&(p.duration=n),void 0!==f&&(p.started=f),Q({},p,{alternate:r,initialIterations:i,iterations:u,reverse:s})},ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ae=0,ie=function(e){return{previousPlaybackOptions:{},previousState:{},subscribe:he(e),subscriptions:[],unsubscribe:de(e)}},oe=function(e){var t=e.event,r=e.state;return r.started&&(!r.finished||void 0===t.previousState||!t.previousState.finished)},ue=function(e){return e.event.subscriptions.map(function(e){return e.name}).reduce(function(e,t){return-1===e.indexOf(t)?e.concat(t):e},[])},ce=function(e){if(pe(e)&&(e.event.previousPlaybackOptions={},e.event.previousState={}),e.event.subscriptions.length&&oe(e)){var t=ue(e);se(e,t).map(function(t){var r=t.name,n=t.options,a=void 0===n?{}:n;e.event.subscriptions.map(function(e){var t=e.name,n=e.callback;r===t&&n(a)})})}e.event.previousPlaybackOptions=ne({},e.playbackOptions),e.event.previousState=ne({},e.state)},se=function(e,t){var r=e.event.previousState,n=e.playbackOptions,a=e.state,i=e.timelineShapes,o=[],u=n.alternate,c=n.duration,s=n.initialIterations,f=n.iterations,p=n.reverse,l=n.started,y=l+c*a.iterationsComplete,v=void 0!==r.iterationsComplete?l+c*r.iterationsComplete+1:0,h=function(e){return le({alternate:u,duration:c,initialIterations:s,iterations:f,max:y,min:v,position:e,reverse:p,started:l})};return-1!==t.indexOf("timeline.start")&&h(0).map(function(e){return o.push({name:"timeline.start",at:e})}),-1!==t.indexOf("timeline.finish")&&h(1).map(function(e){return o.push({name:"timeline.finish",at:e})}),-1!==t.indexOf("shape.start")&&i.map(function(e){var t=e.shape.name,r=e.timelinePosition.start;h(r).map(function(e){return o.push({name:"shape.start",at:e,options:{shapeName:t}})})}),-1!==t.indexOf("shape.finish")&&i.map(function(e){var t=e.shape.name,r=e.timelinePosition.finish;h(r).map(function(e){return o.push({name:"shape.finish",at:e,options:{shapeName:t}})})}),-1!==t.indexOf("keyframe")&&i.map(function(e){var t=e.shape,r=t.name,n=t.keyframes,a=e.timelinePosition,i=a.start,u=a.finish;n.map(function(e){var t=e.name,n=e.position;h(i+(u-i)*n).map(function(e){return o.push({name:"keyframe",at:e,options:{keyframeName:t,shapeName:r}})})})}),-1!==t.indexOf("frame")&&o.push({name:"frame",at:y}),o.sort(fe)},fe=function(e,t){return e.at===t.at?0:e.at<t.at?-1:1},pe=function(e){var t=e.event.previousPlaybackOptions,r=e.playbackOptions;return JSON.stringify(r)!==JSON.stringify(t)},le=function(e){var t=e.alternate,r=e.duration,n=e.initialIterations,a=e.iterations,i=e.max,o=e.min,u=e.position,c=e.reverse,s=e.started,f=Z(n,c),p=s+r*a;return function e(f){if(f<=i){var l=_({alternate:t,complete:H({at:f,duration:r,iterations:a,started:s}),initialIterations:n,iterations:a,reverse:c}),y=0===u||1===u,v=f===p,h=0===u&&l||1===u&&!l;if(f<=p&&(!y||!v||h))return(f>=o?[f]:[]).concat(e(f+ve({alternate:t,duration:r,position:u,reverse:l})))}return[]}(s+ye({alternate:t,duration:r,from:f,reverse:c,to:u}))},ye=function(e){var t=e.alternate,r=e.duration,n=e.from,a=e.reverse,i=e.to;return r*(t?a?n<i?i+n:n-i:n>i?2-(i+n):i-n:a?1===n&&0===i?1:(1-i+n)%1:0===n&&1===i?1:(1-n+i)%1)},ve=function(e){var t=e.alternate,r=e.duration,n=e.position,a=e.reverse;return r*(t?a?2*(0===n?1:n):2-2*(1===n?0:n):1)},he=function(e){return function(t,r){if(me(t)){var n=++ae;return e.event.subscriptions.push({name:t,callback:r,token:n}),n}}},me=function(e){return!0},de=function(e){return function(t){var r=e.event.subscriptions.reduce(function(e,r,n){return r.token===t?n:e},void 0);return void 0!==r&&(e.event.subscriptions.splice(r,1),!0)}},xe=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),be=2*Math.PI,ge=function(e,t,r,n,a,i,o){var u=e.x,c=e.y;return{x:n*(u*=t)-a*(c*=r)+i,y:a*u+n*c+o}},Fe=function(e,t){var r=4/3*Math.tan(t/4),n=Math.cos(e),a=Math.sin(e),i=Math.cos(e+t),o=Math.sin(e+t);return[{x:n-a*r,y:a+n*r},{x:i+o*r,y:o-i*r},{x:i,y:o}]},we=function(e,t,r,n){var a=e*n-t*r<0?-1:1,i=(e*r+t*n)/(Math.sqrt(e*e+t*t)*Math.sqrt(e*e+t*t));return i>1&&(i=1),i<-1&&(i=-1),a*Math.acos(i)},Ae=function(e,t,r,n,a,i,o,u,c,s,f,p){var l=Math.pow(a,2),y=Math.pow(i,2),v=Math.pow(f,2),h=Math.pow(p,2),m=l*y-l*h-y*v;m<0&&(m=0),m/=l*h+y*v;var d=(m=Math.sqrt(m)*(o===u?-1:1))*a/i*p,x=m*-i/a*f,b=s*d-c*x+(e+r)/2,g=c*d+s*x+(t+n)/2,F=(f-d)/a,w=(p-x)/i,A=(-f-d)/a,S=(-p-x)/i,O=we(1,0,F,w),k=we(F,w,A,S);return 0===u&&k>0&&(k-=be),1===u&&k<0&&(k+=be),[b,g,O,k]},Se=function(e){var t=e.px,r=e.py,n=e.cx,a=e.cy,i=e.rx,o=e.ry,u=e.xAxisRotation,c=void 0===u?0:u,s=e.largeArcFlag,f=void 0===s?0:s,p=e.sweepFlag,l=void 0===p?0:p,y=[];if(0===i||0===o)return[];var v=Math.sin(c*be/360),h=Math.cos(c*be/360),m=h*(t-n)/2+v*(r-a)/2,d=-v*(t-n)/2+h*(r-a)/2;if(0===m&&0===d)return[];i=Math.abs(i),o=Math.abs(o);var x=Math.pow(m,2)/Math.pow(i,2)+Math.pow(d,2)/Math.pow(o,2);x>1&&(i*=Math.sqrt(x),o*=Math.sqrt(x));var b=Ae(t,r,n,a,i,o,f,l,v,h,m,d),g=xe(b,4),F=g[0],w=g[1],A=g[2],S=g[3],O=Math.max(Math.ceil(Math.abs(S)/(be/4)),1);S/=O;for(var k=0;k<O;k++)y.push(Fe(A,S)),A+=S;return y.map(function(e){var t=ge(e[0],i,o,h,v,F,w),r=t.x,n=t.y,a=ge(e[1],i,o,h,v,F,w),u=a.x,c=a.y,s=ge(e[2],i,o,h,v,F,w);return{x1:r,y1:n,x2:u,y2:c,x:s.x,y:s.y}})},Oe=function(e,t,r){return Math.acos((Math.pow(e,2)+Math.pow(t,2)-Math.pow(r,2))/(2*e*t))*(180/Math.PI)},ke=function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return Ie(t)?t.map(function(t){return e.apply(void 0,[t].concat(n))}):e.apply(void 0,[t].concat(n))},Me=function(e){return Ie(e)?e:[e]},Ie=function(e){return Array.isArray(e[0])},Ee=function(e,t,r){var n=e===t?0:Math.abs(t-e);return 0===n?e:e<t?e+n*r:e-n*r},Ce=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var a=e[r];if(a.curve&&"cubic"!==a.curve.type){var i=e[r-1],o=i.x,u=i.y,c=a.x,s=a.y;if("arc"===a.curve.type)Se({px:o,py:u,cx:c,cy:s,rx:a.curve.rx,ry:a.curve.ry,xAxisRotation:a.curve.xAxisRotation,largeArcFlag:a.curve.largeArcFlag,sweepFlag:a.curve.sweepFlag}).forEach(function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2,o=e.x,u=e.y;t.push({x:o,y:u,curve:{type:"cubic",x1:r,y1:n,x2:a,y2:i}})});else if("quadratic"===a.curve.type){var f=o+2/3*(a.curve.x1-o),p=u+2/3*(a.curve.y1-u),l=c+2/3*(a.curve.x1-c),y=s+2/3*(a.curve.y1-s);t.push({x:c,y:s,curve:{type:"cubic",x1:f,y1:p,x2:l,y2:y}})}}else t.push(a)}return t},je=function(e){return ke(Ce,e)},De=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Pe=function(e,t){return[{x:Ee(e.x,t.x,.5),y:Ee(e.y,t.y,.5)},t]},Be=function(e,t){var r=t.curve,n=r.x1,a=r.y1,i=r.x2,o=r.y2,u={x:e.x,y:e.y},c={x:n,y:a},s={x:i,y:o},f={x:t.x,y:t.y},p={x:Ee(u.x,c.x,.5),y:Ee(u.y,c.y,.5)},l={x:Ee(c.x,s.x,.5),y:Ee(c.y,s.y,.5)},y={x:Ee(s.x,f.x,.5),y:Ee(s.y,f.y,.5)},v={x:Ee(p.x,l.x,.5),y:Ee(p.y,l.y,.5)},h={x:Ee(l.x,y.x,.5),y:Ee(l.y,y.y,.5)},m={x:Ee(v.x,h.x,.5),y:Ee(v.y,h.y,.5)};return[{x:m.x,y:m.y,curve:{type:"cubic",x1:p.x,y1:p.y,x2:v.x,y2:v.y}},{x:f.x,y:f.y,curve:{type:"cubic",x1:h.x,y1:h.y,x2:y.x,y2:y.y}}]},Te=function(e,t){return t.curve?Be(e,t):Pe(e,t)},qe=function e(t,n){if(isNaN(n))throw Error("`add` function must be passed a number as the second argument");for(var a=[].concat(r(t)),i=1;i<a.length;){if(a.length>=n)return a;var o=a[i];if(o.moveTo)i++;else{var u=a[i-1],c=Te(u,o),s=De(c,2),f=s[0],p=s[1];a.splice(i,1,f,p),i+=2}}return e(a,n)},Ne=function(e,t){return qe(je(e),t)},Qe=function(e,t){var r=He(e,t);return r.reduce(function(e,t,n){var a=t.x,i=t.y;if(!t.moveTo){var o=r[n-1],u=o.x,c=o.y;e+=Le(u,c,a,i)}return e},0)},Le=function(e,t,r,n){return Math.sqrt(Math.pow(e-r,2)+Math.pow(t-n,2))},We=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Re=function(e){var t=We(e[0],2),r=t[0],n=t[1],a=We(e[1],2),i=a[0],o=a[1],u=We(e[2],2),c=u[0],s=u[1],f=Le(r,n,i,o),p=Le(i,o,c,s),l=Le(c,s,r,n);return Oe(f,p,l)},_e=function(e){return e.reduce(function(e,t){return!!t.curve||e},!1)},He=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!_e(e))return e;var r=je(e),n=[];return r.map(function(e,a){if(e.curve){var i=r[a-1];Ze(i,e,t).map(function(e){return n.push(e)})}else n.push(e)}),n},Ve=function(e,t,r,n,a,i,o,u,c){var s=[[o,u],[e,t],[a,i]];return Re([[r,n],[a,i],[e,t]])<c&&Re(s)<c},Ze=function e(t,r,a){var i=t.x,o=t.y,u=r.x,c=r.y,s=r.curve,f=s.x1,p=s.y1,l=s.x2,y=s.y2;if(Ve(i,o,f,p,u,c,l,y,a))return[r];var v=Be(t,r),h=We(v,2),m=h[0],d=h[1];return[].concat(n(e(t,m,a)),n(e(m,d,a)))},ze=function(e){var t=void 0,r=void 0,n=void 0,a=void 0;return Me(e).map(function(e){return He(e).map(function(e){var i=e.x,o=e.y;("number"!=typeof t||o>t)&&(t=o),("number"!=typeof r||i<r)&&(r=i),("number"!=typeof n||i>n)&&(n=i),("number"!=typeof a||o<a)&&(a=o)})}),{bottom:t,center:{x:r+(n-r)/2,y:a+(t-a)/2},left:r,right:n,top:a}},Je=function(e){return e.reduce(function(e,t){return e+Ue(t)},0)},Ue=function(e){return e.length-($e(e)?1:0)},$e=function(e){var t=e[0],r=e[e.length-1];return t.x===r.x&&t.y===r.y},Ge=function(e){return e.reduce(function(e,t){return[].concat(a(e),a(t))},[])},Ke=function(e,t){var r=tt(e),n=Je(r),i=(t%n+n)%n;if(!i)return e;var o=Xe(r,i),u=o.lineIndex,c=o.pointIndex,s=Ye(r,u),f=et(s[0],c),p=[].concat(a(s)).splice(1);return Ge([f].concat(a(p)))},Xe=function(e,t){for(var r=0,n=e.length;r<n;r++){var a=Ue(e[r]);if(t<=a-1)return{lineIndex:r,pointIndex:t};t-=a}},Ye=function(e,t){return[].concat(a(e)).splice(t).concat([].concat(a(e)).splice(0,t))},et=function(e,t){if(!t)return e;var r=[{x:e[t].x,y:e[t].y,moveTo:!0}].concat(a([].concat(a(e)).splice(t+1)));return $e(e)?[].concat(a(r),a([].concat(a(e)).splice(1,t))):[].concat(a(r),a([].concat(a(e)).splice(0,t+1)))},tt=function(e){return e.reduce(function(e,t){return t.moveTo&&e.push([]),e[e.length-1].push(t),e},[])},rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nt=function(e,t,r){return e.map(function(e){var n=rt({},e);return n.x+=t,n.y+=r,n.curve&&(n.curve=rt({},n.curve),"quadratic"!==n.curve.type&&"cubic"!==n.curve.type||(n.curve.x1+=t,n.curve.y1+=r),"cubic"===n.curve.type&&(n.curve.x2+=t,n.curve.y2+=r)),n})},at=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ke(nt,e,t,r)},it=function(e,t,r,n,a){if(e===r)return t>=n?0:180;var i=Le(r,n,e,t-100),o=Oe(a,100,i);return e<r?o:360-o},ot=function(e,t,r,n){var a=e[t-2],i=a.x,o=a.y,u=e[t-1],c=u.x,s=u.y,f=Le(i,o,c,s);return{x1:i,y1:o,x2:c,y2:s,segmentInterval:(n-r)/f+1,segmentLength:f}},ut=function(e,t,r){var n=He(e,r),a=n.length,i=Qe(n),o=i*t,u=t>1?ot(n,a,i,o):t<0?ct(n,o):st(n,a,o),c=u.x1,s=u.y1,f=u.x2,p=u.y2,l=u.segmentInterval,y=u.segmentLength;return{angle:it(c,s,f,p,y),x:Ee(c,f,l),y:Ee(s,p,l)}},ct=function(e,t){var r=e[0],n=r.x,a=r.y,i=e[1],o=i.x,u=i.y,c=Le(n,a,o,u);return{x1:n,y1:a,x2:o,y2:u,segmentInterval:t/c,segmentLength:c}},st=function(e,t,r){for(var n=0,a=0;a<t;a++)if(!e[a].moveTo){var i=e[a-1],o=i.x,u=i.y,c=e[a],s=c.x,f=c.y,p=Le(o,u,s,f);if(n+p>=r)return{x1:o,y1:u,x2:s,y2:f,segmentInterval:(r-n)/p,segmentLength:p};n+=p}},ft=function(e,t,r){if(t.curve||r.curve)return!1;var n=(r.y-e.y)*(t.x-e.x)-(r.x-e.x)*(t.y-e.y);if(Math.abs(n)>Number.EPSILON)return!1;var a=(r.x-e.x)*(t.x-e.x)+(r.y-e.y)*(t.y-e.y);return!(a<0)&&!(a>(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},pt=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var a=t[t.length-1],i=e[r+1],o=e[r];a&&i&&o&&ft(a,i,o)||t.push(o)}return t},lt=function(e){var t=void 0,r=void 0;return e.reverse().map(function(e,n){var a=e.x,i=e.y,o=e.moveTo,u=e.curve,c={x:a,y:i};if(r){var s=r,f=s.x1,p=s.y1,l=s.x2,y=s.y2;c.curve={type:"cubic",x1:l,y1:y,x2:f,y2:p}}return(0===n||t)&&(c.moveTo=!0),t=o,r=u||null,c})},yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vt=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ht=function(e,t,r,n,a){var i=a.x,o=a.y,u=e-i,c=t-o;return[u*r-c*n+i,u*n+c*r+o]},mt=function(e,t,r){return e.map(function(e){var n=t*Math.PI/180,a=Math.cos(n),i=Math.sin(n),o=ht(e.x,e.y,a,i,r),u=vt(o,2),c=u[0],s=u[1],f=yt({},e,{x:c,y:s});if(f.curve){if("quadratic"===f.curve.type||"cubic"===f.curve.type){var p=ht(f.curve.x1,f.curve.y1,a,i,r),l=vt(p,2),y=l[0],v=l[1];f.curve=yt({},f.curve,{x1:y,y1:v})}if("cubic"===f.curve.type){var h=ht(f.curve.x2,f.curve.y2,a,i,r),m=vt(h,2),d=m[0],x=m[1];f.curve=yt({},f.curve,{x2:d,y2:x})}}return f})},dt=function(e,t){var r=ze(e).center;return ke(mt,e,t,r)},xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bt=function(e,t,r,n){var a=xt({},e);return a.x=r-(r-a.x)*t,a.y=n-(n-a.y)*t,e.curve&&(a.curve=xt({},a.curve),"arc"===a.curve.type?(a.curve.rx&&(a.curve.rx=a.curve.rx*t),a.curve.ry&&(a.curve.ry=a.curve.ry*t)):(a.curve.x1=r-(r-a.curve.x1)*t,a.curve.y1=n-(n-a.curve.y1)*t,"cubic"===a.curve.type&&(a.curve.x2=r-(r-a.curve.x2)*t,a.curve.y2=n-(n-a.curve.y2)*t))),a},gt=Object.freeze({add:Ne,boundingBox:ze,cubify:je,length:Qe,moveIndex:function(e,t){return ke(Ke,e,t)},offset:at,position:ut,remove:function(e){return ke(pt,e)},reverse:function(e){return ke(lt,je(e))},rotate:dt,scale:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",n=ze(e),a=n.bottom,i=n.center,o=n.left,u=n.right,c=n.top,s=i.x,f=i.y;switch(r){case"topLeft":s=o,f=c;break;case"topRight":s=u,f=c;break;case"bottomRight":s=u,f=a;break;case"bottomLeft":s=o,f=a}return ke(function(e){return e.map(function(e){return bt(e,t,s,f)})},e)}}),Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wt=function(e){var t=e.type,r=i(e,["type"]);switch(t){case"circle":return At(r);case"ellipse":return St(r);case"line":return Ot(r);case"path":return Pt(r);case"polygon":return Bt(r);case"polyline":return Tt(r);case"rect":return Nt(r);case"g":return Wt(r);default:throw new Error("Not a valid shape type")}},At=function(e){var t=e.cx,r=e.cy,n=e.r;return[{x:t,y:r-n,moveTo:!0},{x:t,y:r+n,curve:{type:"arc",rx:n,ry:n,sweepFlag:1}},{x:t,y:r-n,curve:{type:"arc",rx:n,ry:n,sweepFlag:1}}]},St=function(e){var t=e.cx,r=e.cy,n=e.rx,a=e.ry;return[{x:t,y:r-a,moveTo:!0},{x:t,y:r+a,curve:{type:"arc",rx:n,ry:a,sweepFlag:1}},{x:t,y:r-a,curve:{type:"arc",rx:n,ry:a,sweepFlag:1}}]},Ot=function(e){var t=e.x1,r=e.x2;return[{x:t,y:e.y1,moveTo:!0},{x:r,y:e.y2}]},kt=/[MmLlHhVvCcSsQqTtAaZz]/g,Mt={A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},It=["a","c","h","l","m","q","s","t","v"],Et=function(e){return-1!==It.indexOf(e)},Ct=["xAxisRotation","largeArcFlag","sweepFlag"],jt=function(e){return e.match(kt)},Dt=function(e){return e.split(kt).map(function(e){return e.replace(/[0-9]+-/g,function(e){return e.slice(0,-1)+" -"})}).map(function(e){return e.replace(/\.[0-9]+/g,function(e){return e+" "})}).map(function(e){return e.trim()}).filter(function(e){return e.length>0}).map(function(e){return e.split(/[ ,]+/).map(parseFloat).filter(function(e){return!isNaN(e)})})},Pt=function(e){for(var t=e.d,r=jt(t),n=Dt(t),a=[],i=void 0,o=0,u=r.length;o<u;o++){var c=r[o],s=c.toUpperCase(),f=Mt[s],p=Et(c),l=0===o?null:a[a.length-1];if(f>0)for(var y=n.shift(),v=y.length/f,h=0;h<v;h++)switch(s){case"M":var m=(p&&l?l.x:0)+y.shift(),d=(p&&l?l.y:0)+y.shift();i={x:m,y:d},a.push({x:m,y:d,moveTo:!0});break;case"L":a.push({x:(p?l.x:0)+y.shift(),y:(p?l.y:0)+y.shift()});break;case"H":a.push({x:(p?l.x:0)+y.shift(),y:l.y});break;case"V":a.push({x:l.x,y:(p?l.y:0)+y.shift()});break;case"A":a.push({curve:{type:"arc",rx:y.shift(),ry:y.shift(),xAxisRotation:y.shift(),largeArcFlag:y.shift(),sweepFlag:y.shift()},x:(p?l.x:0)+y.shift(),y:(p?l.y:0)+y.shift()});var x=!0,b=!1,g=void 0;try{for(var F,w=Ct[Symbol.iterator]();!(x=(F=w.next()).done);x=!0){var A=F.value;0===a[a.length-1].curve[A]&&delete a[a.length-1].curve[A]}}catch(e){b=!0,g=e}finally{try{!x&&w.return&&w.return()}finally{if(b)throw g}}break;case"C":a.push({curve:{type:"cubic",x1:(p?l.x:0)+y.shift(),y1:(p?l.y:0)+y.shift(),x2:(p?l.x:0)+y.shift(),y2:(p?l.y:0)+y.shift()},x:(p?l.x:0)+y.shift(),y:(p?l.y:0)+y.shift()});break;case"S":var S=(p?l.x:0)+y.shift(),O=(p?l.y:0)+y.shift(),k=(p?l.x:0)+y.shift(),M=(p?l.y:0)+y.shift(),I={},E=void 0,C=void 0;l.curve&&"cubic"===l.curve.type?(I.x=Math.abs(l.x-l.curve.x2),I.y=Math.abs(l.y-l.curve.y2),E=l.x<l.curve.x2?l.x-I.x:l.x+I.x,C=l.y<l.curve.y2?l.y-I.y:l.y+I.y):(I.x=Math.abs(k-S),I.y=Math.abs(M-O),E=l.x,C=l.y),a.push({curve:{type:"cubic",x1:E,y1:C,x2:S,y2:O},x:k,y:M});break;case"Q":a.push({curve:{type:"quadratic",x1:(p?l.x:0)+y.shift(),y1:(p?l.y:0)+y.shift()},x:(p?l.x:0)+y.shift(),y:(p?l.y:0)+y.shift()});break;case"T":var j=(p?l.x:0)+y.shift(),D=(p?l.y:0)+y.shift(),P=void 0,B=void 0;if(l.curve&&"quadratic"===l.curve.type){var T={x:Math.abs(l.x-l.curve.x1),y:Math.abs(l.y-l.curve.y1)};P=l.x<l.curve.x1?l.x-T.x:l.x+T.x,B=l.y<l.curve.y1?l.y-T.y:l.y+T.y}else P=l.x,B=l.y;a.push({curve:{type:"quadratic",x1:P,y1:B},x:j,y:D})}else l.x===i.x&&l.y===i.y||a.push({x:i.x,y:i.y})}return a},Bt=function(e){var t=e.points;return qt({closed:!0,points:t})},Tt=function(e){var t=e.points;return qt({closed:!1,points:t})},qt=function(e){var t=e.closed,r=e.points.split(/[\s,]+/).map(function(e){return parseFloat(e)}).reduce(function(e,t,r){return r%2==0?e.push({x:t}):e[(r-1)/2].y=t,e},[]);return t&&r.push(Ft({},r[0])),r[0].moveTo=!0,r},Nt=function(e){var t=e.height,r=e.rx,n=e.ry,a=e.width,i=e.x,o=e.y;return r||n?Lt({height:t,rx:r||n,ry:n||r,width:a,x:i,y:o}):Qt({height:t,width:a,x:i,y:o})},Qt=function(e){var t=e.height,r=e.width,n=e.x,a=e.y;return[{x:n,y:a,moveTo:!0},{x:n+r,y:a},{x:n+r,y:a+t},{x:n,y:a+t},{x:n,y:a}]},Lt=function(e){var t=e.height,r=e.rx,n=e.ry,a=e.width,i=e.x,o=e.y,u={type:"arc",rx:r,ry:n,sweepFlag:1};return[{x:i+r,y:o,moveTo:!0},{x:i+a-r,y:o},{x:i+a,y:o+n,curve:u},{x:i+a,y:o+t-n},{x:i+a-r,y:o+t,curve:u},{x:i+r,y:o+t},{x:i,y:o+t-n,curve:u},{x:i,y:o+n},{x:i+r,y:o,curve:u}]},Wt=function(e){return e.shapes.map(function(e){return wt(e)})},Rt=function(e){var t="",r=0,n=void 0,a=!0,i=!1,o=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var s=u.value,f=s.curve,p=void 0!==f&&f,l=s.moveTo,y=s.x,v=s.y,h=0===r||l,m=r===e.length-1||e[r+1].moveTo,d=0===r?null:e[r-1];if(h)n=s,m||(t+="M"+y+","+v);else if(p){switch(p.type){case"arc":var x=s.curve,b=x.largeArcFlag,g=void 0===b?0:b,F=x.rx,w=x.ry,A=x.sweepFlag,S=void 0===A?0:A,O=x.xAxisRotation;t+="A"+F+","+w+","+(void 0===O?0:O)+","+g+","+S+","+y+","+v;break;case"cubic":var k=s.curve;t+="C"+k.x1+","+k.y1+","+k.x2+","+k.y2+","+y+","+v;break;case"quadratic":var M=s.curve;t+="Q"+M.x1+","+M.y1+","+y+","+v}m&&y===n.x&&v===n.y&&(t+="Z")}else m&&y===n.x&&v===n.y?t+="Z":y!==d.x&&v!==d.y?t+="L"+y+","+v:y!==d.x?t+="H"+y:v!==d.y&&(t+="V"+v);r++}}catch(e){i=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw o}}return t},_t=function(e){var t=Array.isArray(e),r=t?Array.isArray(e[0]):"g"===e.type,n=t?e:r?e.shapes.map(function(e){return wt(e)}):wt(e);return r?n.map(function(e){return Rt(e)}):Rt(n)},Ht=("function"==typeof Symbol&&Symbol.iterator,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zt=function e(t,r){var n=t.points,a=t.childFrameShapes;return a?t.childFrameShapes=a.map(function(t,n){return e(t,r[n])}):r.reduce(function(e,t){return e||t})&&(t.points=je(n).map(function(e,t){return r[t]&&!e.curve?Vt({},e,{curve:{type:"cubic",x1:n[t-1].x,y1:n[t-1].y,x2:n[t].x,y2:n[t].y}}):e})),t},zt=function e(t,r){if(Array.isArray(r[0]))t.childFrameShapes||(t.childFrameShapes=[E(t)],delete t.points),t.childFrameShapes.length!==r.length&&r.map(function(e,r){if(r>=t.childFrameShapes.length){var n=t.childFrameShapes[r-1].points;t.childFrameShapes.push({attributes:E(t.attributes),points:[Vt({},E(n[n.length-1]),{moveTo:!0}),E(n[n.length-1])]})}}),t.childFrameShapes=t.childFrameShapes.map(function(t,n){return e(t,r[n])});else{var n=rr(t.points);r.map(function(e,t){if(!n[t]){var r=n[t-1];n[t]=[Vt({},E(r[r.length-1]),{moveTo:!0}),E(r[r.length-1])]}e>n[t].length&&(n[t]=Ne(n[t],e))}),t.points=Yt(n)}return t},Jt=function e(t,r,n){return Array.isArray(r)?(Array.isArray(t[n])||(t[n]=[t[n]]),r.reduce(e,t[n])):Array.isArray(t[n])?e(t[n],r,0):t[n]=Math.max(t[n]||0,r),t},Ut=function e(t){return t.reduce(function(t,r){return t.map(function(t,n){return Array.isArray(t)?e([t,r[n]]):t||r[n]})})},$t=function(e){return e.reduce(function(e,t){return t.reduce(Jt,e)},[])},Gt=function(e,t){return ee(e,void 0!==t?t:Date.now()),e.timelineShapes.map(function(t){var r=t.shape,n=t.timelinePosition,a=n.start,i=n.finish;if(e.state.position<=a)return N(r.keyframes[0].frameShape,e.middleware);if(e.state.position>=i)return N(r.keyframes[r.keyframes.length-1].frameShape,e.middleware);var o=(e.state.position-a)/(i-a);return Xt({shape:r,position:o,middleware:e.middleware})})},Kt=function e(t){var r=t.shapes,n=u(t,["shapes"]),a=(n.type,n.height,n.width,n.x,n.y,n.cx,n.cy,n.r,n.rx,n.ry,n.x1,n.x2,n.y1,n.y2,n.d,n.points,n.shapes,u(n,["type","height","width","x","y","cx","cy","r","rx","ry","x1","x2","y1","y2","d","points","shapes"]));return"g"===n.type&&r?{attributes:a,childFrameShapes:r.map(function(t){return e(t)})}:{attributes:a,points:wt(n)}},Xt=function(e){var t=e.middleware,r=void 0===t?[]:t,n=e.position,a=e.shape,i=a.keyframes.reduce(function(e,t,r){var a=t.position;return n>a?r:e},0),o=i+1,u=a.keyframes[i],c=a.keyframes[o],s=(n-u.position)/(c.position-u.position),f=nr(u.frameShape,c.frameShape,c.tween.easing,s);return c.tween.forces.map(function(e){f=e(f,s)}),N(f,r)},Yt=function(e){var t;return(t=[]).concat.apply(t,o(e))},er=function e(t){var r=t.points,n=t.childFrameShapes;return n?n.map(e):r.map(function(e){return void 0!==e.curve})},tr=function e(t){var r=t.points,n=t.childFrameShapes;return n?n.map(e):r.reduce(function(e,t){return t.moveTo?e.push(1):e[e.length-1]++,e},[])},rr=function(e){var t=[];return e.map(function(e){e.moveTo?t.push([e]):t[t.length-1].push(e)}),t},nr=function e(t,r,n,a){var i="The tween function's from and to arguments must be of an identicle structure";if(Array.isArray(t))return t.map(function(t,i){return e(t,r[i],n,a)});if(null!==t&&"object"===(void 0===t?"undefined":Ht(t))){if(null!==r&&"object"!==(void 0===r?"undefined":Ht(r)))throw new TypeError(i);var o={};return Object.keys(t).map(function(i){o[i]=e(t[i],r[i],n,a)}),o}return"number"==typeof t?t===r?t:n(a,t,r,1):t},ar={linear:function(e,t,r,n){return(r-t)*e/n+t},easeInQuad:function(e,t,r,n){return(r-t)*(e/=n)*e+t},easeOutQuad:function(e,t,r,n){return-(r-t)*(e/=n)*(e-2)+t},easeInOutQuad:function(e,t,r,n){var a=r-t;return(e/=n/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,r,n){return(r-t)*(e/=n)*e*e+t},easeOutCubic:function(e,t,r,n){return(r-t)*((e=e/n-1)*e*e+1)+t},easeInOutCubic:function(e,t,r,n){var a=r-t;return(e/=n/2)<1?a/2*e*e*e+t:a/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,r,n){return(r-t)*(e/=n)*e*e*e+t},easeOutQuart:function(e,t,r,n){return-(r-t)*((e=e/n-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,r,n){var a=r-t;return(e/=n/2)<1?a/2*e*e*e*e+t:-a/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,r,n){return(r-t)*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,r,n){return(r-t)*((e=e/n-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,r,n){var a=r-t;return(e/=n/2)<1?a/2*e*e*e*e*e+t:a/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,r,n){var a=r-t;return-a*Math.cos(e/n*(Math.PI/2))+a+t},easeOutSine:function(e,t,r,n){return(r-t)*Math.sin(e/n*(Math.PI/2))+t},easeInOutSine:function(e,t,r,n){return-(r-t)/2*(Math.cos(Math.PI*e/n)-1)+t},easeInExpo:function(e,t,r,n){var a=r-t;return 0==e?t:a*Math.pow(2,10*(e/n-1))+t},easeOutExpo:function(e,t,r,n){var a=r-t;return e==n?t+a:a*(1-Math.pow(2,-10*e/n))+t},easeInOutExpo:function(e,t,r,n){var a=r-t;return 0===e?t:e===n?t+a:(e/=n/2)<1?a/2*Math.pow(2,10*(e-1))+t:a/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,r,n){return-(r-t)*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,r,n){return(r-t)*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOutCirc:function(e,t,r,n){var a=r-t;return(e/=n/2)<1?-a/2*(Math.sqrt(1-e*e)-1)+t:a/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,r,n){var a,i,o,u=r-t;return o=1.70158,i=0,a=u,0===e?t:1==(e/=n)?t+u:(i||(i=.3*n),a<Math.abs(u)?(a=u,o=i/4):o=i/(2*Math.PI)*Math.asin(u/a),-a*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/i)+t)},easeOutElastic:function(e,t,r,n){var a,i,o,u=r-t;return o=1.70158,i=0,a=u,0===e?t:1==(e/=n)?t+u:(i||(i=.3*n),a<Math.abs(u)?(a=u,o=i/4):o=i/(2*Math.PI)*Math.asin(u/a),a*Math.pow(2,-10*e)*Math.sin((e*n-o)*(2*Math.PI)/i)+u+t)},easeInOutElastic:function(e,t,r,n){var a,i,o,u=r-t;return o=1.70158,i=0,a=u,0===e?t:2==(e/=n/2)?t+u:(i||(i=n*(.3*1.5)),a<Math.abs(u)?(a=u,o=i/4):o=i/(2*Math.PI)*Math.asin(u/a),e<1?a*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/i)*-.5+t:a*Math.pow(2,-10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/i)*.5+u+t)},easeInBack:function(e,t,r,n,a){var i=r-t;return void 0===a&&(a=1.70158),i*(e/=n)*e*((a+1)*e-a)+t},easeOutBack:function(e,t,r,n,a){var i=r-t;return void 0===a&&(a=1.70158),i*((e=e/n-1)*e*((a+1)*e+a)+1)+t},easeInOutBack:function(e,t,r,n,a){var i=r-t;return void 0===a&&(a=1.70158),(e/=n/2)<1?i/2*(e*e*((1+(a*=1.525))*e-a))+t:i/2*((e-=2)*e*((1+(a*=1.525))*e+a)+2)+t},easeInBounce:function(e,t,r,n){var a,i=r-t;return a=ar.easeOutBounce(n-e,0,i,n),i-a+t},easeOutBounce:function(e,t,r,n){var a=r-t;return(e/=n)<1/2.75?a*(7.5625*e*e)+t:e<2/2.75?a*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?a*(7.5625*(e-=2.25/2.75)*e+.9375)+t:a*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,r,n){var a=r-t;return e<n/2?.5*ar.easeInBounce(2*e,0,a,n)+t:.5*ar.easeOutBounce(2*e-n,0,a,n)+.5*a+t}},ir=ar,or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur=function(e){switch(void 0===e?"undefined":or(e)){case"string":if(ir[e])return ir[e];break;case"function":return e}},cr=function(e,t){var r=s(t),n=r[0],a=r.slice(1),i=sr(e),o=i.points,u=i.pointsMap,f=gt[n].apply(gt,[o].concat(c(a)));return fr({frameShape:e,points:f,pointsMap:u})},sr=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakMap;return t.childFrameShapes?t.childFrameShapes.map(function(t){e(t,r,n)}):(n.set(t,r.length),r.push(t.points)),{points:r,pointsMap:n}},fr=function e(t){var r=t.frameShape,n=t.points,a=t.pointsMap;return r.points&&(r.points=n[a.get(r)]),r.childFrameShapes&&r.childFrameShapes.map(function(t){e({frameShape:t,points:n,pointsMap:a})}),r},pr=function(e,t){return t.reduce(cr,e)},lr=function(e,t){return t.reduce(function(e,t){var r=s(t),n=r[0],a=r.slice(1);return gt[n].apply(gt,[e].concat(c(a)))},e)},yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vr=("function"==typeof Symbol&&Symbol.iterator,function e(t){var r=t.attributes,n=t.points,a=t.childFrameShapes;return a?yr({},r,{type:"g",shapes:a.map(e)}):yr({},r,{type:"path",d:_t(n)})}),hr=function(e){var t=e.angle,r=e.frameShape,n=e.x,a=e.y,i=sr(r),o=i.points,u=i.pointsMap,c=at(o,n,a),s=t?dt(c,t):c;return fr({frameShape:r,points:s,pointsMap:u})},mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dr=function(e){var t=e.map(function(e){var t=e.frameShape;return tr(t)}),r=$t(t),n=e.map(function(e){return e.frameShape=zt(e.frameShape,r),e}),a=n.map(function(e){var t=e.frameShape;return er(t)}),i=Ut(a);return n.map(function(e){return e.frameShape=Zt(e.frameShape,i),e})},xr=function(e){var t=[];e.map(function(e,r){var n=e.delay,a=e.duration,i=e.easing,o=e.forces,u=void 0===o?[]:o,c=e.name,s=e.transforms,f=void 0===s?[]:s,l=p(e,["delay","duration","easing","forces","name","transforms"]),y=Kt(l),v={name:void 0!==c?c:r,frameShape:pr(y,f)};if(r>0&&(v.tween={duration:void 0!==a?a:P.defaults.keyframe.duration,easing:ur(i||P.defaults.keyframe.easing),forces:u},n)){var h=t[t.length-1],m=mr({},h,{name:h.name+".delay",tween:{duration:n}});t.push(m)}t.push(v)});var r=dr(t),n=gr(t);return{duration:n,keyframes:br(r,n)}},br=function(e,t){var r=0;return e.map(function(e){var n=e.tween,a=(n=void 0===n?{}:n).duration;return r+=void 0===a?0:a,mr({},e,{position:0===r?0:r/t})})},gr=function(e){return e.reduce(function(e,t){var r=t.tween,n=(r=void 0===r?{}:r).duration;return e+=void 0===n?0:n},0)},Fr=("function"==typeof Symbol&&Symbol.iterator,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=wr(t),a=n.plainShapeObjects,i=n.options.name,o=xr(a),u={duration:o.duration,keyframes:o.keyframes};return void 0!==i&&(u.name=i),u}),wr=function(e){var t={plainShapeObjects:e.filter(function(e){return e.type}),options:e.length>1&&void 0===e[e.length-1].type?e[e.length-1]:{}};if(Ar(t))return t},Ar=function(e){e.plainShapeObjects,e.options.name;return!0},Sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Or=["data-jsx-ext","data-reactid"],kr=[{type:"circle",coreProps:["cx","cy","r"]},{type:"ellipse",coreProps:["cx","cy","rx","ry"]},{type:"g",coreProps:[]},{type:"line",coreProps:["x1","x2","y1","y2"]},{type:"path",coreProps:["d"]},{type:"polygon",coreProps:["points"]},{type:"polyline",coreProps:["points"]},{type:"rect",coreProps:["height","rx","ry","width","x","y"]}],Mr=function(e){return kr.filter(function(t){return t.type===e})[0].coreProps},Ir=function(e,t){var r=Object.keys(e),n=Object.keys(t);return{remove:r.filter(function(e){return-1===n.indexOf(e)}),update:n.filter(function(n){return-1!==r.indexOf(n)||e[n]!==t[n]})}},Er=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return e.map(Cr).map(function(e){return t.appendChild(e)}),t},Cr=function(e){if(qr(e)){var t=e.attributes,r=e.childFrameShapes,n=e.points,a=r?Er(r):Dr(n);return Object.keys(t).map(function(e){a.setAttribute(e,t[e])}),a}},jr=function(e){var t=e.attributes,r=e.childNodes,n=e.nodeName,a={};return e.hasAttributes()&&[].concat(l(t)).map(function(e){var t=e.name,r=e.value;-1===Or.indexOf(t)&&(a[t]=r)}),{attributes:a,childNodes:[].concat(l(r)),type:n}},Dr=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",_t(e)),t},Pr=function e(t){if(Nr(t)){var r=jr(t),n=r.attributes,a=r.childNodes,i=r.type;return"g"===i?Sr({},n,{type:i,shapes:a.filter(Qr).map(e)}):Sr({},n,Br(i,n))}},Br=function(e,t){var r=Mr(e),n={type:e};return Object.keys(t).map(function(e){if(-1!==r.indexOf(e)){var a=t[e],i=Number(a);n[e]=Number.isNaN(i)?a:i}}),n},Tr=function e(t,r){if(Nr(t)&&qr(r)){var n=r.attributes,a=r.childFrameShapes,i=r.points;if(a){var o=[].concat(l(t.childNodes)).filter(Qr);a.map(function(t,r){e(o[r],t)})}else{var u=_t(i);u!==t.getAttribute("d")&&t.setAttribute("d",u)}var c=t.attributes,s=Ir(c,n),f=s.remove,p=s.update;return f.map(function(e){t.removeAttribute(e)}),p.map(function(e){t.setAttribute(e,n[e])}),t}},qr=function(e){return!0},Nr=function(e){return!0},Qr=function(e){var t=e.nodeName;return-1!==kr.map(function(e){return e.type}).indexOf(t)},Lr=!1,Wr=function(e){var t=e.state;return t.started&&!t.finished&&t.rendered},Rr=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.at,n=t.bypassTickingCheck,a=void 0!==n&&n,i=t.recurse,o=void 0===i||i;Lr&&!a||(Lr=!0,window.requestAnimationFrame(function(){var t=void 0!==r?r:Date.now(),n=_r.filter(Wr);n.map(function(e){var r=Gt(e,t);e.timelineShapes.map(function(e,t){var n=e.shape;Tr(n.node,r[t])}),ce(e)}),n.length&&o?e({bypassTickingCheck:!0}):Lr=!1}))},_r=[],Hr=(function(){function e(e){this.value=e}function t(t){function r(a,i){try{var o=t[a](i),u=o.value;u instanceof e?Promise.resolve(u.value).then(function(e){r("next",e)},function(e){r("throw",e)}):n(o.done?"return":"normal",o.value)}catch(e){n("throw",e)}}function n(e,t){switch(e){case"return":a.resolve({value:t,done:!0});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:!1})}(a=a.next)?r(a.key,a.arg):i=null}var a,i;this._invoke=function(e,t){return new Promise(function(n,o){var u={key:e,arg:t,resolve:n,reject:o,next:null};i?i=i.next=u:(a=i=u,r(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),Vr=function(e,t){t.replace?(t.replace.parentNode.replaceChild(t.node,t.replace),delete t.replace):e.appendChild(t.node)},Zr=function(e,t){e.node=Cr(t)},zr=function(e){var t=[],r=[];return e.map(function(e){"object"===(void 0===e?"undefined":Hr(e))&&e.keyframes?t.push(e):"object"===(void 0===e?"undefined":Hr(e))&&e.middleware&&e.playbackOptions&&e.state&&e.timelineShapes&&r.push(e)}),{shapes:t,timelines:r}},Jr=("function"==typeof Symbol&&Symbol.iterator,Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e});e.colorMiddleware=M,e.motionPath=function(e){var t=e.accuracy,r=void 0===t?1:t,n=e.easing,a=void 0===n?P.defaults.motionPath.easing:n,i=e.rotate,o=void 0!==i&&i,u=e.transforms,c=void 0===u?[]:u,s=f(e,["accuracy","easing","rotate","transforms"]),p=lr(wt(s),c),l=ur(a);return function(e,t){var n=l(t,0,1,1),a=ut(p,n,r),i=a.angle,u=a.x,c=a.y;return u||c?hr({angle:"number"==typeof o?(i+o)%360:!0===o?i:0,frameShape:e,x:u,y:c}):e}},e.pause=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];e.playbackOptions=Y({at:r,timeline:e,pause:!0,playbackOptions:t}),ee(e,r)},e.plainShapeObject=function(e,t){var r=void 0===e.timeline?e.keyframes[0].frameShape:Gt(e.timeline,t)[e.timelineIndex];return vr(r)},e.play=function(e,t,r){V(e,t,r),Rr()},e.render=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=zr(r),i=a.shapes,o=a.timelines;i.map(function(e){Zr(e,e.keyframes[0].frameShape)}),o.map(function(e){var t=Gt(e);e.timelineShapes.map(function(e,r){var n=e.shape;Zr(n,t[r])})}),i.map(function(t){Vr(e,t),t.rendered=!0}),o.map(function(t){t.timelineShapes.map(function(t){var r=t.shape;return Vr(e,r)}),t.state.rendered=!0}),Rr()},e.shape=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Fr.apply(void 0,y(t.map(function(e){if(e.el){var t=Jr({},Pr(e.el),e);return delete t.el,t}return e}))),a=(t.length>1&&void 0===t[t.length-1].type?t[t.length-1]:{}).replace;return a&&(n.replace=a),n},e.timeline=function(){var e=G.apply(void 0,arguments);return _r.push(e),e},e.unitMiddleware=D,Object.defineProperty(e,"__esModule",{value:!0})});
